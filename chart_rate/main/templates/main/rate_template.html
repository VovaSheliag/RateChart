<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.5.1/chart.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    
    <title>Rate</title>
</head>

<body>

<div class="bg-primary mw-100 position-relative" style="height: 200px;">
    <h2 class="position-absolute start-50 translate-middle" style="top: 30px; color: #dfebb2;">Enter rate USD to UAH and date</h2>
    <form action="{% url 'main' %}" method="post" class="position-absolute top-50 start-50 translate-middle">
        {% csrf_token %}
        <div class=" mb-3 d-inline" >
        {{ form.ua_rate }}
        </div>
        <div class="mb-3 d-inline">
        {{ form.date }}
        </div>
        <button type="submit" class="btn btn-light">Submit</button>
    </form>
    <div class="position-absolute start-50 translate-middle" style="top: 160px; color: #dfebb2;">
    {{errors}}
    </div>
</div>

<canvas id="myChart" class="bg-light" height="100"></canvas>  <!-- Create line chart -->  

<script>
    let date = [];  //Empty array to save dates from DB
    let rate = []; // Empty arrat to save rates from DB 
    '{% for i in date %}'  // Add rates and dates to arrays
    date.push('{{  i.date }}');
    rate.push('{{ i.ua_rate }}');
    '{% endfor %}'
    let myChart = document.getElementById('myChart').getContext('2d'); 

    let rateChart = new Chart(myChart, {
    type: 'line',
    data: {  // Settings of the line chart 
        labels: date, // Date array 
        datasets: [{
            label: 'Rate chart',
            data: rate, // Rate array 
            borderColor: [
                'rgba(255, 99, 132, 1)'  // Red color 
            ],
            borderWidth: 2
        }]
    },
});

</script>
</body>
</html>